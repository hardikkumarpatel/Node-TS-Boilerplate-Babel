{"version":3,"file":"Error.helper.js","names":["_multer","require","_httpStatusCodes","_","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","ErrorHelper","capture","errors","res","MulterError","code","status","StatusCodes","REQUEST_TOO_LONG","send","json","BAD_REQUEST","field","INTERNAL_SERVER_ERROR","message","stack","arguments","length","undefined","ApiErrorResponseHelper","getReasonPhrase","_default","exports","default"],"sources":["../../../src/helpers/app/Error.helper.ts"],"sourcesContent":["import { Response } from \"express\";\nimport { MulterError } from \"multer\";\nimport { getReasonPhrase, StatusCodes } from \"http-status-codes\";\nimport { ApiErrorResponseHelper } from \"@/helpers\";\n\nclass ErrorHelper {\n  private static json = (code: number, message: string, stack: string | null = null) => {\n    return new ApiErrorResponseHelper(code, getReasonPhrase(code), message, stack);\n  };\n\n  public static capture(errors: MulterError | Error, res: Response) {\n    if (errors instanceof MulterError) {\n      if (errors.code === \"LIMIT_FILE_SIZE\") {\n        return res\n          .status(StatusCodes.REQUEST_TOO_LONG)\n          .send(\n            ErrorHelper.json(\n              StatusCodes.REQUEST_TOO_LONG,\n              \"File size is too large. Max size is 1MB\"\n            )\n          );\n      } else if (errors.code === \"LIMIT_UNEXPECTED_FILE\") {\n        return res\n          .status(StatusCodes.BAD_REQUEST)\n          .send(\n            ErrorHelper.json(StatusCodes.BAD_REQUEST, \"Unexpected files. too many files uploaded\")\n          );\n      } else if ((errors.code as any) === \"INVALID_FILE_TYPE\") {\n        return res\n          .status(StatusCodes.BAD_REQUEST)\n          .send(ErrorHelper.json(StatusCodes.BAD_REQUEST, errors.field as string));\n      } else {\n        return res\n          .status(StatusCodes.INTERNAL_SERVER_ERROR)\n          .send(\n            ErrorHelper.json(\n              StatusCodes.INTERNAL_SERVER_ERROR,\n              \"An unknown error occurred during the file upload\"\n            )\n          );\n      }\n    }\n  }\n}\n\nexport default ErrorHelper;\n"],"mappings":";;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,gBAAA,GAAAD,OAAA;AACA,IAAAE,CAAA,GAAAF,OAAA;AAAmD,SAAAG,gBAAAC,CAAA,EAAAC,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAE,cAAA,CAAAF,CAAA,MAAAD,CAAA,GAAAI,MAAA,CAAAC,cAAA,CAAAL,CAAA,EAAAC,CAAA,IAAAK,KAAA,EAAAJ,CAAA,EAAAK,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAAT,CAAA,CAAAC,CAAA,IAAAC,CAAA,EAAAF,CAAA;AAAA,SAAAG,eAAAD,CAAA,QAAAQ,CAAA,GAAAC,YAAA,CAAAT,CAAA,uCAAAQ,CAAA,GAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAC,aAAAT,CAAA,EAAAD,CAAA,2BAAAC,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAF,CAAA,GAAAE,CAAA,CAAAU,MAAA,CAAAC,WAAA,kBAAAb,CAAA,QAAAU,CAAA,GAAAV,CAAA,CAAAc,IAAA,CAAAZ,CAAA,EAAAD,CAAA,uCAAAS,CAAA,SAAAA,CAAA,YAAAK,SAAA,yEAAAd,CAAA,GAAAe,MAAA,GAAAC,MAAA,EAAAf,CAAA;AAEnD,MAAMgB,WAAW,CAAC;EAKhB,OAAcC,OAAOA,CAACC,MAA2B,EAAEC,GAAa,EAAE;IAChE,IAAID,MAAM,YAAYE,mBAAW,EAAE;MACjC,IAAIF,MAAM,CAACG,IAAI,KAAK,iBAAiB,EAAE;QACrC,OAAOF,GAAG,CACPG,MAAM,CAACC,4BAAW,CAACC,gBAAgB,CAAC,CACpCC,IAAI,CACHT,WAAW,CAACU,IAAI,CACdH,4BAAW,CAACC,gBAAgB,EAC5B,yCACF,CACF,CAAC;MACL,CAAC,MAAM,IAAIN,MAAM,CAACG,IAAI,KAAK,uBAAuB,EAAE;QAClD,OAAOF,GAAG,CACPG,MAAM,CAACC,4BAAW,CAACI,WAAW,CAAC,CAC/BF,IAAI,CACHT,WAAW,CAACU,IAAI,CAACH,4BAAW,CAACI,WAAW,EAAE,2CAA2C,CACvF,CAAC;MACL,CAAC,MAAM,IAAKT,MAAM,CAACG,IAAI,KAAa,mBAAmB,EAAE;QACvD,OAAOF,GAAG,CACPG,MAAM,CAACC,4BAAW,CAACI,WAAW,CAAC,CAC/BF,IAAI,CAACT,WAAW,CAACU,IAAI,CAACH,4BAAW,CAACI,WAAW,EAAET,MAAM,CAACU,KAAe,CAAC,CAAC;MAC5E,CAAC,MAAM;QACL,OAAOT,GAAG,CACPG,MAAM,CAACC,4BAAW,CAACM,qBAAqB,CAAC,CACzCJ,IAAI,CACHT,WAAW,CAACU,IAAI,CACdH,4BAAW,CAACM,qBAAqB,EACjC,kDACF,CACF,CAAC;MACL;IACF;EACF;AACF;AAAChC,eAAA,CAtCKmB,WAAW,UACO,UAACK,IAAY,EAAES,OAAe,EAAkC;EAAA,IAAhCC,KAAoB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EAC/E,OAAO,IAAIG,wBAAsB,CAACd,IAAI,EAAE,IAAAe,gCAAe,EAACf,IAAI,CAAC,EAAES,OAAO,EAAEC,KAAK,CAAC;AAChF,CAAC;AAAA,IAAAM,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAqCYvB,WAAW","ignoreList":[]}