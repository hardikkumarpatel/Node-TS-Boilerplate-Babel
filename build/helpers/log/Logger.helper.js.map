{"version":3,"file":"Logger.helper.js","names":["winston","_interopRequireWildcard","require","_","_utils","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","LoggerHelper","print","createLogger","level","process","env","LOG_LEVEL","levels","config","npm","transports","Console","format","combine","colorize","message","colors","error","info","debug","warn","http","timestamp","date","simple","printf","printMessage","concat","metadata","ApiErrorResponseHelper","errors","data","extensions","stacktrace","code","errorMessage","JSON","stringify","_default","exports"],"sources":["../../../src/helpers/log/Logger.helper.ts"],"sourcesContent":["import * as winston from \"winston\";\nimport { ApiErrorResponseHelper } from \"@/helpers\";\nimport { date } from \"@/utils\";\n\nexport type Logger = winston.Logger;\nclass LoggerHelper {\n  static print(): Logger {\n    return winston.createLogger({\n      level: process.env.LOG_LEVEL,\n      levels: winston.config.npm.levels,\n      transports: [new winston.transports.Console()],\n      format: winston.format.combine(\n        winston.format.colorize({\n          level: true,\n          message: true,\n          colors: {\n            error: \"red\",\n            info: \"green\",\n            debug: \"green\",\n            warn: \"yellow\",\n            http: \"blue\"\n          }\n        }),\n        winston.format.timestamp({\n          format: date()\n        }),\n        winston.format.simple(),\n        winston.format.printf((info: winston.Logform.TransformableInfo) => {\n          const printMessage = `[${info.timestamp}] [${info.level}]: ${info.message}`;\n          if (info.metadata) {\n            if (info.metadata instanceof ApiErrorResponseHelper) {\n              const { errors } = info.metadata;\n              const [data] = errors;\n              const { message, extensions: { stacktrace, code } = {} } = data;\n              const errorMessage = JSON.stringify({ code, message, stacktrace }, null, 2);\n              return `${printMessage} | ${errorMessage}`;\n            }\n            if (typeof info.metadata === \"object\") {\n              const message = JSON.stringify(info.metadata, null, 2);\n              return `${printMessage} | ${message}`;\n            }\n            if (typeof info.metadata === \"number\") {\n              return `${printMessage} | ${info.metadata}`;\n            }\n            return `${printMessage} | ${info.metadata}`;\n          }\n          return printMessage;\n        })\n      )\n    });\n  }\n\n  public static info(message: string): void;\n  public static info<T>(message: string, metadata?: T): void;\n  public static info<T>(message: string, metadata?: T) {\n    LoggerHelper.print().info(message, { metadata });\n  }\n\n  public static debug(message: string): void;\n  public static debug<T>(message: string, metadata: T): void;\n  public static debug<T>(message: string, metadata?: T) {\n    LoggerHelper.print().debug(message, { metadata });\n  }\n\n  public static error(message: string): void;\n  public static error<T>(message: string, metadata?: T): void;\n  public static error<T>(message: string, metadata?: T) {\n    LoggerHelper.print().error(message, { metadata });\n  }\n\n  public static warn(message: string): void;\n  public static warn<T>(message: string, metadata?: T): void;\n  public static warn<T>(message: string, metadata?: T) {\n    LoggerHelper.print().warn(message, { metadata });\n  }\n\n  public static http(message: string): void;\n  public static http(message: string) {\n    LoggerHelper.print().http(message);\n  }\n}\n\nexport default LoggerHelper;\n"],"mappings":"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","ignoreList":[]}