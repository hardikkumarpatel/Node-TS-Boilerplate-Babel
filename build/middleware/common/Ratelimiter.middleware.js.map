{"version":3,"file":"Ratelimiter.middleware.js","names":["_expressRateLimit","_interopRequireDefault","require","_httpStatusCodes","_helpers","e","__esModule","default","_defineProperty","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","RateLimiterMiddleware","rateLimit","windowMs","max","message","standardHeaders","legacyHeaders","handler","_req","res","__next","options","status","statusCode","send","ApiErrorResponseHelper","getReasonPhrase","_default","exports"],"sources":["../../../src/middleware/common/Ratelimiter.middleware.ts"],"sourcesContent":["import { Request, Response, NextFunction } from \"express\";\nimport rateLimit, { Options } from \"express-rate-limit\";\nimport { getReasonPhrase } from \"http-status-codes\";\nimport { ApiErrorResponseHelper } from \"@/helpers\";\n\nclass RateLimiterMiddleware {\n  public static limiter = rateLimit({\n    windowMs: 5 * 1000 /** in milliseconds */,\n    max: 2, // Limit each IP to 2 requests per `window` (here, per 5 seconds)\n    message: \"You have exceeded the request! please try after some time\",\n    standardHeaders: true,\n    legacyHeaders: false,\n    handler: (_req: Request, res: Response, __next: NextFunction, options: Options) => {\n      return res\n        .status(options.statusCode)\n        .send(\n          new ApiErrorResponseHelper(\n            options.statusCode,\n            getReasonPhrase(options.statusCode),\n            options.message\n          )\n        );\n    }\n  });\n}\n\nexport default RateLimiterMiddleware;\n"],"mappings":";;;;;;AACA,IAAAA,iBAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,gBAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAAmD,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAG,gBAAAH,CAAA,EAAAI,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAE,cAAA,CAAAF,CAAA,MAAAJ,CAAA,GAAAO,MAAA,CAAAC,cAAA,CAAAR,CAAA,EAAAI,CAAA,IAAAK,KAAA,EAAAJ,CAAA,EAAAK,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAAZ,CAAA,CAAAI,CAAA,IAAAC,CAAA,EAAAL,CAAA;AAAA,SAAAM,eAAAD,CAAA,QAAAQ,CAAA,GAAAC,YAAA,CAAAT,CAAA,uCAAAQ,CAAA,GAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAC,aAAAT,CAAA,EAAAD,CAAA,2BAAAC,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAL,CAAA,GAAAK,CAAA,CAAAU,MAAA,CAAAC,WAAA,kBAAAhB,CAAA,QAAAa,CAAA,GAAAb,CAAA,CAAAiB,IAAA,CAAAZ,CAAA,EAAAD,CAAA,uCAAAS,CAAA,SAAAA,CAAA,YAAAK,SAAA,yEAAAd,CAAA,GAAAe,MAAA,GAAAC,MAAA,EAAAf,CAAA;AAEnD,MAAMgB,qBAAqB,CAAC;AAmB3BlB,eAAA,CAnBKkB,qBAAqB,aACD,IAAAC,yBAAS,EAAC;EAChCC,QAAQ,EAAE,CAAC,GAAG,IAAI,CAAC;EACnBC,GAAG,EAAE,CAAC;EAAE;EACRC,OAAO,EAAE,2DAA2D;EACpEC,eAAe,EAAE,IAAI;EACrBC,aAAa,EAAE,KAAK;EACpBC,OAAO,EAAEA,CAACC,IAAa,EAAEC,GAAa,EAAEC,MAAoB,EAAEC,OAAgB,KAAK;IACjF,OAAOF,GAAG,CACPG,MAAM,CAACD,OAAO,CAACE,UAAU,CAAC,CAC1BC,IAAI,CACH,IAAIC,+BAAsB,CACxBJ,OAAO,CAACE,UAAU,EAClB,IAAAG,gCAAe,EAACL,OAAO,CAACE,UAAU,CAAC,EACnCF,OAAO,CAACP,OACV,CACF,CAAC;EACL;AACF,CAAC,CAAC;AAAA,IAAAa,QAAA,GAAAC,OAAA,CAAArC,OAAA,GAGWmB,qBAAqB","ignoreList":[]}